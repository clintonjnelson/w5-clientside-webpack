<section data-main-heading-directive></section>
<main data-ng-controller="usersController" data-ng-init="getUsers()">
  <aside data-ng-if="errors.length > 0">
    <div class="row well">
      <ul data-ng-repeat="error in errors">
        <strong>Error:</strong>
        <li> <strong>{{error}}</strong> </li>
      </ul>
      <a href="#" class="close" data-ng-click="clearErrors()">&times;</a>
    </div>
  </aside>

  <div data-logout-directive></div>
  <div data-sub-heading-directive></div>
  <section class="panel panel-info col-sm-8 col-sm-offset-1">
    <summary class="panel-heading">
      <h3 class="panel-title">Users:</h3>
    </summary>
    <article class="panel-body">
      <ul data-ng-repeat="user in users">
        <li>{{ user.username }}
          <button class="btn btn-xs btn-info text-center" data-ng-if="!user.editing" data-ng-click="toggleEdit(user)">
            change stuff
          </button>
          <div data-delete-user-button-directive></div>
          <div data-ng-if="user.editing" >
            <div data-users-form-directive
                 data-user="user"
                 data-save-user="updateUser(user)"
                 data-button-text="'save stuff'"
                 data-label-text="Username:"
                 data-form-name="'editing' + user.id">
            </div>
            <button data-ng-click="toggleEdit(user)">cancel</button>
            <!-- <form action="" name={{'editing'+user._id}}>
              <input type="text" data-ng-model="user.username">
              <button type="submit" class="btn btn-xs btn-info" data-ng-click="updateUser(user)">
                save stuff
              </button>
            </form> -->
          </div data>
        </li>
      </ul>

    </article>
  </section>

  <section class="panel panel-success col-sm-8 col-sm-offset-1">
    <summary class="panel-heading">
      <h3 class="panel-title">Add User</h3>
    </summary>
    <article class="panel-body">
      <div data-users-form-directive
           data-user="user"
           data-save-user="createUser(user)"
           data-button-text="'create user'"
           data-label-text="Username:"
           data-form-name="'newUser'">
      </div>
    </article>
  </section>
</main>
